(()=>{"use strict";var e=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function a(e){try{d(i.next(e))}catch(e){c(e)}}function r(e){try{d(i.throw(e))}catch(e){c(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}d((i=i.apply(e,t||[])).next())}))};const t="./";class n{constructor(e,t,n,i,o){this.name=e,this.fileOrder=t,this.path=n,this.size=i,this.type=o}}class i{constructor(e,t){this.path=e,this.sortType=t}}function o(o,c){return e(this,void 0,void 0,(function*(){const e=new i(o,c),a=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return(yield a.json()).map((e=>new n(e.name,e.fileOrder,e.path,e.size,e.type)))}))}function c(e){let t=document.querySelector(".folder-list");t.innerHTML="",console.log(e);for(let n=0;n<e.length;n++)if(0!==e[n].name.length)for(let i=0;i<e.length;i++)if(e[i].fileOrder===n){let i=e[n],o=document.createElement("li"),c=document.createElement("li"),a=document.createElement("img");"DIR"===i.type?a.src="/static/dirImage.png":a.src="/static/fileImg.jpg";let r=document.createElement("span");a.className="file-icon",o.className="file-space",o.setAttribute("name",i.name),o.setAttribute("path",i.path),c.appendChild(a),c.appendChild(document.createTextNode(i.name)),o.appendChild(c),o.appendChild(r),r.className="folder-size",r.appendChild(document.createTextNode(i.size+" mb")),t.appendChild(o);break}}function a(e){if(0===e.length)return;let t=e.split("/"),n=document.getElementById("currentDir");n.innerHTML="";let i=document.createElement("a"),o="/";i.setAttribute("path",o),i.className="root",i.appendChild(document.createTextNode("start:/")),n.appendChild(i),o="";for(let e=1;e<t.length;e++){if(0===t[e].length)continue;let i=document.createElement("a");o+="/"+t[e],i.setAttribute("path",o),i.className="root",i.appendChild(document.createTextNode(t[e])),i.appendChild(document.createTextNode("/")),n.appendChild(i)}}function r(e){let t=document.getElementById("timer");t.innerHTML="";let n=document.createElement("span");t.appendChild(n),n.appendChild(document.createTextNode(e+"ms"))}var d=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function a(e){try{d(i.next(e))}catch(e){c(e)}}function r(e){try{d(i.throw(e))}catch(e){c(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}d((i=i.apply(e,t||[])).next())}))};const l="ASC";let u="/",s=l;const m=function(){return d(this,void 0,void 0,(function*(){let e=new Date,t=event.target.closest("li").getAttribute("path");c(yield o(t,s)),a(t),u=t,r((new Date).getTime()-e.getTime())}))};function p(){return d(this,void 0,void 0,(function*(){let e=new Date,t=event.target.getAttribute("path");c(yield o(t,s)),a(t),u=t,r((new Date).getTime()-e.getTime())}))}function h(){return d(this,void 0,void 0,(function*(){let e=new Date,t=s===l?"DESK":l;c(yield o(u,t)),a(u),s=t,r((new Date).getTime()-e.getTime())}))}window.onload=function(){return d(this,void 0,void 0,(function*(){let e=new Date,t=yield o("/",s);document.getElementById("sortButt").addEventListener("click",h),document.getElementById("folder-list").addEventListener("click",m),document.getElementById("currentDir").addEventListener("click",p),c(t),a(u),r((new Date).getTime()-e.getTime())}))}})();