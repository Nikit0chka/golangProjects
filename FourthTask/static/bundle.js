(()=>{"use strict";var t=function(t,e,n,i){return new(n||(n=Promise))((function(o,d){function a(t){try{l(i.next(t))}catch(t){d(t)}}function c(t){try{l(i.throw(t))}catch(t){d(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}l((i=i.apply(t,e||[])).next())}))};const e="./";class n{constructor(t,e,n,i,o){this.name=t,this.fileOrder=e,this.path=n,this.size=i,this.type=o}}class i{constructor(t,e){this.path=t,this.sortType=e}}function o(o,d){return t(this,void 0,void 0,(function*(){const t=new i(o,d),a=yield fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return(yield a.json()).map((t=>new n(t.name,t.fileOrder,t.path,t.size,t.type)))}))}var d;function a(t,e,n){document.getElementById(t).addEventListener(e,n)}!function(t){t.FILE="FILE",t.DIRECTORY="DIR"}(d||(d={}));var c,l=function(t,e,n,i){return new(n||(n=Promise))((function(o,d){function a(t){try{l(i.next(t))}catch(t){d(t)}}function c(t){try{l(i.throw(t))}catch(t){d(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}l((i=i.apply(t,e||[])).next())}))};!function(t){t.ASC="ASC",t.DESK="DESK"}(c||(c={}));let r=new class{addFilesToHtml(t){const e=document.querySelector(".folder-list");e.innerHTML="";for(let n=0;n<t.length;n++)for(let i=0;i<t.length;i++)if(t[i].fileOrder===n){const i=t[n],o=document.createElement("li"),a=document.createElement("div"),c=document.createElement("img");i.type===d.DIRECTORY||void 0===i.type?c.src="/static/dirImage.png":c.src="/static/fileImg.jpg";const l=document.createElement("span");c.className="file-icon",o.className="file-space",o.setAttribute("name",i.name),o.setAttribute("path",i.path),a.appendChild(c),a.appendChild(document.createTextNode(i.name)),o.appendChild(a),o.appendChild(l),l.className="folder-size",l.appendChild(document.createTextNode(i.size+" mb")),e.appendChild(o);break}}addRootToHtml(t){const e=t.split("\\"),n=document.getElementById("currentDir");n.innerHTML="";const i=document.createElement("a");let o="D:";i.setAttribute("path",o),i.className="root",i.appendChild(document.createTextNode("start\\")),n.appendChild(i);for(let t=1;t<e.length;t++){if(""===e[t])continue;const i=document.createElement("a");o+="\\"+e[t],i.setAttribute("path",o),i.className="root",i.appendChild(document.createTextNode(e[t])),i.appendChild(document.createTextNode("\\")),n.appendChild(i)}}addTimerToHtml(t){const e=document.getElementById("timer");e.innerHTML="";const n=document.createElement("span");e.appendChild(n),n.appendChild(document.createTextNode(t+"ms"))}},s="D:\\";var m=c.ASC;function u(){return l(this,void 0,void 0,(function*(){const t=new Date,e=event.target.closest("li").getAttribute("path"),n=yield o(e,m);r.addFilesToHtml(n),r.addRootToHtml(e),s=e,r.addTimerToHtml((new Date).getTime()-t.getTime())}))}function p(){return l(this,void 0,void 0,(function*(){const t=new Date,e=event.target.getAttribute("path"),n=yield o(e,m);r.addFilesToHtml(n),r.addRootToHtml(e),s=e,r.addTimerToHtml((new Date).getTime()-t.getTime())}))}function T(){return l(this,void 0,void 0,(function*(){const t=new Date,e=m===c.ASC?c.DESK:c.ASC,n=yield o(s,e);r.addFilesToHtml(n),r.addRootToHtml(s),m=e,r.addTimerToHtml((new Date).getTime()-t.getTime())}))}function h(){return l(this,void 0,void 0,(function*(){const t=new Date,e=s.lastIndexOf("\\");let n=s.slice(0,e);"D"!=n[0]&&(n="D");const i=yield o(n,m);r.addFilesToHtml(i),r.addRootToHtml(n),s=n,r.addTimerToHtml((new Date).getTime()-t.getTime())}))}function f(){return l(this,void 0,void 0,(function*(){const t=new Date,e=yield o(s,m);r.addFilesToHtml(e),r.addRootToHtml(s),r.addTimerToHtml((new Date).getTime()-t.getTime())}))}window.onload=function(){return l(this,void 0,void 0,(function*(){const t=new Date,e=yield o(s,m);a("sortButt","click",T),a("folder-list","click",u),a("currentDir","click",p),a("parentButt","click",h),a("directoriesButt","click",f),r.addFilesToHtml(e),r.addRootToHtml(s),r.addTimerToHtml((new Date).getTime()-t.getTime())}))}})();